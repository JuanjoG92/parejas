<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FaithMeet</title>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="css/app.css">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="FaithMeet">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="media/icons/icon-192.svg">
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="app.html" class="nav-brand">
        <div class="logo-icon"><i class="fas fa-heart"></i></div>
        <span>Faith<strong>Meet</strong></span>
      </a>
      <div class="nav-actions" style="display:flex">
        <div class="lang-switch">
          <button class="lang-btn active" onclick="setLang('es')">ES</button>
          <button class="lang-btn" onclick="setLang('en')">EN</button>
          <button class="lang-btn" onclick="setLang('pt')">PT</button>
        </div>
        <button class="btn btn-ghost" onclick="logout()" data-i18n="app.logout">Salir</button>
      </div>
    </div>
  </nav>

  <div class="app-layout">
    <!-- Sidebar -->
    <aside class="app-sidebar">
      <button class="app-nav-btn active" data-section="discover" onclick="showAppSection('discover')">
        <i class="fas fa-compass"></i><span data-i18n="app.discover">Descubrir</span>
      </button>
      <button class="app-nav-btn" data-section="matches" onclick="showAppSection('matches')">
        <i class="fas fa-heart"></i><span data-i18n="app.matches">Matches</span>
      </button>
      <button class="app-nav-btn" data-section="profile" onclick="showAppSection('profile')">
        <i class="fas fa-user"></i><span data-i18n="app.profile">Perfil</span>
      </button>
    </aside>

    <!-- Main content -->
    <main class="app-main">

      <!-- Discover Section -->
      <div id="section-discover" class="app-section active">
        <div class="discover-filters" id="discoverFilters">
          <select id="filterCountry" onchange="applyFilters()">
            <option value="" data-i18n="filter.allCountries">Todos los países</option>
            <option value="Argentina">Argentina</option>
            <option value="Bolivia">Bolivia</option>
            <option value="Brasil">Brasil</option>
            <option value="Chile">Chile</option>
            <option value="Colombia">Colombia</option>
            <option value="Costa Rica">Costa Rica</option>
            <option value="Ecuador">Ecuador</option>
            <option value="El Salvador">El Salvador</option>
            <option value="España">España</option>
            <option value="Estados Unidos">Estados Unidos</option>
            <option value="Guatemala">Guatemala</option>
            <option value="Honduras">Honduras</option>
            <option value="México">México</option>
            <option value="Nicaragua">Nicaragua</option>
            <option value="Panamá">Panamá</option>
            <option value="Paraguay">Paraguay</option>
            <option value="Perú">Perú</option>
            <option value="Puerto Rico">Puerto Rico</option>
            <option value="Rep. Dominicana">Rep. Dominicana</option>
            <option value="Uruguay">Uruguay</option>
            <option value="Venezuela">Venezuela</option>
          </select>
          <input type="number" id="filterAgeMin" placeholder="Edad mín" min="18" max="99" style="width:75px" onchange="applyFilters()" data-i18n-placeholder="filter.ageMin">
          <input type="number" id="filterAgeMax" placeholder="Edad máx" min="18" max="99" style="width:75px" onchange="applyFilters()" data-i18n-placeholder="filter.ageMax">
          <select id="filterDenom" onchange="applyFilters()">
            <option value="" data-i18n="filter.allDenoms">Todas</option>
            <option value="Evangélica">Evangélica</option>
            <option value="Católica">Católica</option>
            <option value="Pentecostal">Pentecostal</option>
            <option value="Bautista">Bautista</option>
            <option value="Adventista">Adventista</option>
            <option value="Metodista">Metodista</option>
            <option value="Presbiteriana">Presbiteriana</option>
            <option value="Anglicana">Anglicana</option>
            <option value="Luterana">Luterana</option>
            <option value="No denominacional">No denominacional</option>
          </select>
        </div>
        <div class="discover-container" id="discoverCard">
          <div class="discover-empty"><i class="fas fa-spinner fa-spin"></i><p>Cargando...</p></div>
        </div>
      </div>

      <!-- Matches Section -->
      <div id="section-matches" class="app-section">
        <h2 style="text-align:center;margin-bottom:1.5rem" data-i18n="app.matches">Matches</h2>
        <div class="matches-grid" id="matchesGrid"></div>
      </div>

      <!-- Chat Section -->
      <div id="section-chat" class="app-section">
        <div class="chat-container" id="chatContainer"></div>
      </div>

      <!-- Profile Section -->
      <div id="section-profile" class="app-section">
        <div class="profile-container">
          <div class="profile-header">
            <div class="photo-upload-wrap" onclick="document.getElementById('photoInput').click()">
              <img id="profAvatar" class="profile-avatar" src="" alt="" style="display:none">
              <div id="profAvatarPlaceholder" class="profile-avatar-placeholder"><i class="fas fa-user"></i></div>
              <div class="photo-upload-btn"><i class="fas fa-camera"></i></div>
              <input type="file" id="photoInput" accept="image/*" onchange="uploadPhoto(this)">
            </div>
            <div id="photoAlert" class="alert" style="margin-top:0.5rem"></div>
            <h2 data-i18n="prof.edit">Editar perfil</h2>
          </div>
          <div class="profile-form">
            <div id="profAlert" class="alert"></div>
            <form onsubmit="handleProfileSave(event)">
              <div class="form-group">
                <label data-i18n="reg.name">Nombre</label>
                <input type="text" id="profName" required>
              </div>
              <div class="form-group">
                <label data-i18n="reg.email">Email</label>
                <input type="email" id="profEmail" disabled>
              </div>
              <div class="form-group">
                <label data-i18n="reg.country">País</label>
                <select id="profCountry">
                  <option value="Argentina">Argentina</option>
                  <option value="Bolivia">Bolivia</option>
                  <option value="Brasil">Brasil</option>
                  <option value="Chile">Chile</option>
                  <option value="Colombia">Colombia</option>
                  <option value="Costa Rica">Costa Rica</option>
                  <option value="Ecuador">Ecuador</option>
                  <option value="El Salvador">El Salvador</option>
                  <option value="España">España</option>
                  <option value="Estados Unidos">Estados Unidos</option>
                  <option value="Guatemala">Guatemala</option>
                  <option value="Honduras">Honduras</option>
                  <option value="México">México</option>
                  <option value="Nicaragua">Nicaragua</option>
                  <option value="Panamá">Panamá</option>
                  <option value="Paraguay">Paraguay</option>
                  <option value="Perú">Perú</option>
                  <option value="Puerto Rico">Puerto Rico</option>
                  <option value="Rep. Dominicana">Rep. Dominicana</option>
                  <option value="Uruguay">Uruguay</option>
                  <option value="Venezuela">Venezuela</option>
                  <option value="Otro">Otro</option>
                </select>
              </div>
              <div class="form-group">
                <label data-i18n="reg.denomination">Denominación</label>
                <select id="profDenom">
                  <option value="Evangélica">Evangélica</option>
                  <option value="Católica">Católica</option>
                  <option value="Pentecostal">Pentecostal</option>
                  <option value="Bautista">Bautista</option>
                  <option value="Adventista">Adventista</option>
                  <option value="Metodista">Metodista</option>
                  <option value="Presbiteriana">Presbiteriana</option>
                  <option value="Anglicana">Anglicana</option>
                  <option value="Luterana">Luterana</option>
                  <option value="No denominacional">No denominacional</option>
                  <option value="Otra">Otra</option>
                </select>
              </div>
              <div class="form-group">
                <label data-i18n="prof.bio">Sobre mí</label>
                <textarea id="profBio" rows="3" placeholder="Contá algo sobre vos..."></textarea>
              </div>
              <div class="form-group">
                <label data-i18n="prof.lookingFor">Qué busco</label>
                <textarea id="profLooking" rows="2" placeholder="Qué buscás en una pareja..."></textarea>
              </div>

              <div class="section-label"><i class="fas fa-heart"></i> <span data-i18n="reg.traits">Mis rasgos de carácter</span></div>
              <div class="checkbox-group" id="profTraits">
                <label><input type="checkbox" value="Leal"><span>Leal</span></label>
                <label><input type="checkbox" value="Sincero/a"><span>Sincero/a</span></label>
                <label><input type="checkbox" value="Honesto/a"><span>Honesto/a</span></label>
                <label><input type="checkbox" value="Trabajador/a"><span>Trabajador/a</span></label>
                <label><input type="checkbox" value="Paciente"><span>Paciente</span></label>
                <label><input type="checkbox" value="Cariñoso/a"><span>Cariñoso/a</span></label>
                <label><input type="checkbox" value="Respetuoso/a"><span>Respetuoso/a</span></label>
                <label><input type="checkbox" value="Generoso/a"><span>Generoso/a</span></label>
                <label><input type="checkbox" value="Humilde"><span>Humilde</span></label>
                <label><input type="checkbox" value="Responsable"><span>Responsable</span></label>
                <label><input type="checkbox" value="Comprensivo/a"><span>Comprensivo/a</span></label>
                <label><input type="checkbox" value="Alegre"><span>Alegre</span></label>
                <label><input type="checkbox" value="Protector/a"><span>Protector/a</span></label>
                <label><input type="checkbox" value="Amable"><span>Amable</span></label>
                <label><input type="checkbox" value="Perseverante"><span>Perseverante</span></label>
                <label><input type="checkbox" value="Fiel"><span>Fiel</span></label>
                <label><input type="checkbox" value="Valiente"><span>Valiente</span></label>
                <label><input type="checkbox" value="Empático/a"><span>Empático/a</span></label>
                <label><input type="checkbox" value="Servicial"><span>Servicial</span></label>
                <label><input type="checkbox" value="Familiar"><span>Familiar</span></label>
              </div>

              <div class="section-label"><i class="fas fa-futbol"></i> <span data-i18n="reg.sports">Deportes que me gustan</span></div>
              <div class="checkbox-group" id="profSports">
                <label><input type="checkbox" value="Fútbol"><span>Fútbol</span></label>
                <label><input type="checkbox" value="Béisbol"><span>Béisbol</span></label>
                <label><input type="checkbox" value="Básquetbol"><span>Básquetbol</span></label>
                <label><input type="checkbox" value="Voleibol"><span>Voleibol</span></label>
                <label><input type="checkbox" value="Ciclismo"><span>Ciclismo</span></label>
                <label><input type="checkbox" value="Natación"><span>Natación</span></label>
                <label><input type="checkbox" value="Equitación"><span>Equitación</span></label>
                <label><input type="checkbox" value="Rodeo"><span>Rodeo</span></label>
                <label><input type="checkbox" value="Atletismo"><span>Atletismo</span></label>
                <label><input type="checkbox" value="Boxeo"><span>Boxeo</span></label>
                <label><input type="checkbox" value="Softbol"><span>Softbol</span></label>
                <label><input type="checkbox" value="Caminata"><span>Caminata</span></label>
              </div>

              <div class="section-label"><i class="fas fa-tree"></i> <span data-i18n="reg.activities">Actividades al aire libre</span></div>
              <div class="checkbox-group" id="profActivities">
                <label><input type="checkbox" value="Pesca"><span>Pesca</span></label>
                <label><input type="checkbox" value="Caza"><span>Caza</span></label>
                <label><input type="checkbox" value="Agricultura"><span>Agricultura</span></label>
                <label><input type="checkbox" value="Jardinería"><span>Jardinería</span></label>
                <label><input type="checkbox" value="Camping"><span>Camping</span></label>
                <label><input type="checkbox" value="Senderismo"><span>Senderismo</span></label>
                <label><input type="checkbox" value="Crianza de animales"><span>Crianza de animales</span></label>
                <label><input type="checkbox" value="Cocinar al aire libre"><span>Cocinar al aire libre</span></label>
                <label><input type="checkbox" value="Trabajo en madera"><span>Trabajo en madera</span></label>
                <label><input type="checkbox" value="Apicultura"><span>Apicultura</span></label>
                <label><input type="checkbox" value="Montar a caballo"><span>Montar a caballo</span></label>
                <label><input type="checkbox" value="Ordeño"><span>Ordeño</span></label>
              </div>

              <button type="submit" class="btn btn-primary" style="width:100%;justify-content:center;margin-top:1.5rem" data-i18n="prof.save">Guardar cambios</button>
            </form>
          </div>
        </div>
      </div>

    </main>
  </div>

  <!-- Match Overlay -->
  <div id="matchOverlay" class="match-overlay"></div>

  <script src="js/app.js"></script>
  <script>
    if (!getUser()) { window.location.href = 'login.html'; }
    else { showAppSection('discover'); }
  </script>
  <script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js').catch(function(){});
  }
  </script>
</body>
</html>
